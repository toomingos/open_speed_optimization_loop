{
  "before": {
    "nodes": [
      { "id": "b-evseq", "type": "step", "position": { "x": 125, "y": 0 }, "data": { "label": "Upstream CTE", "duration": "", "highlight": false } },
      { "id": "b-lastpos", "type": "step", "position": { "x": 0, "y": 80 }, "data": { "label": "Aggregation (ref 1)", "duration": "", "highlight": true, "removed": true } },
      { "id": "b-posjoin", "type": "step", "position": { "x": 250, "y": 80 }, "data": { "label": "Filter Join (ref 2)", "duration": "", "highlight": true, "removed": true } },
      { "id": "b-filtered", "type": "step", "position": { "x": 125, "y": 160 }, "data": { "label": "Filtered Data", "duration": "", "highlight": false } },
      { "id": "b-build", "type": "step", "position": { "x": 125, "y": 240 }, "data": { "label": "Build Map", "duration": "", "highlight": false } }
    ],
    "edges": [
      { "id": "e-b-evseq-lastpos", "source": "b-evseq", "target": "b-lastpos", "type": "smoothstep", "animated": true },
      { "id": "e-b-evseq-posjoin", "source": "b-evseq", "target": "b-posjoin", "type": "smoothstep", "animated": true },
      { "id": "e-b-lastpos-filtered", "source": "b-lastpos", "target": "b-filtered", "type": "smoothstep", "animated": true },
      { "id": "e-b-posjoin-filtered", "source": "b-posjoin", "target": "b-filtered", "type": "smoothstep", "animated": true },
      { "id": "e-b-filtered-build", "source": "b-filtered", "target": "b-build", "type": "smoothstep", "animated": true }
    ]
  },
  "after": {
    "nodes": [
      { "id": "a-evseq", "type": "step", "position": { "x": 0, "y": 0 }, "data": { "label": "Upstream CTE", "duration": "", "highlight": false } },
      { "id": "a-window", "type": "step", "position": { "x": 0, "y": 80 }, "data": { "label": "Window Function", "duration": "", "highlight": true, "added": true } },
      { "id": "a-filtered", "type": "step", "position": { "x": 0, "y": 160 }, "data": { "label": "Filtered Data", "duration": "", "highlight": false } },
      { "id": "a-build", "type": "step", "position": { "x": 0, "y": 240 }, "data": { "label": "Build Map", "duration": "", "highlight": false } }
    ],
    "edges": [
      { "id": "e-a-evseq-window", "source": "a-evseq", "target": "a-window", "type": "smoothstep", "animated": true },
      { "id": "e-a-window-filtered", "source": "a-window", "target": "a-filtered", "type": "smoothstep", "animated": true },
      { "id": "e-a-filtered-build", "source": "a-filtered", "target": "a-build", "type": "smoothstep", "animated": true }
    ]
  }
}